
@import "base/app/edit/index.scss";

$transition: global("transitions.slide");
$background: rgba(global("nav.background"), .98);
$background-cover: global("nav.background");
$background-glass: global("glass.background");
$shield-color: global("shield.background");
$max-width: 400px;
$max-height: 400px;
$close-size: 50px;
$font-color: #fff;
$z-index: 999105;
$edge-font-color: #fff;
$edge-box-shadow: none;
$glass-blur: global("glass.blur");
$glass-saturation: global("glass.saturation");
$glass-glow-color: global("glass.glow-color");
$glass-glow-size: $max-width / 2;

html.drawer-open body{

    // Setting touch-action to none here gets rid of a warning message in chrome
    // caused by preventDefault being called on a passive event listener.
    overflow: hidden;
    touch-action: none;
    user-select: none;

}

sidebar.drawer{

    color: $font-color;
    user-select: none;

    &[side = "left"],
    &[side = "right"]{

        &:after,
        .wrap{

            bottom: 0;
            height: 100%;
            max-width: $max-width;
            top: 0;
            width: calc(100% - #{$close-size});

        }

        .content-wrap:after{

            bottom: 0;
            top: 0;

        }

    }

    &[side = "top"],
    &[side = "bottom"]{

        &:after,
        .wrap{

            height: calc(100% - #{$close-size});
            left: 0;
            right: 0;

        }

        .content-wrap:after{

            left: 0;
            right: 0;

        }

    }

    &[side = "left"]{

        &:after,
        .wrap{

            left: 0;
            transform: translate3d(-100%, 0, 0);

        }

        .content-wrap:after{

            left: 100%;

        }

        .content:after{

            background: linear-gradient(to right, rgba(255, 255, 255, 0), $glass-glow-color);
            height: 100%;
            right: 0;
            top: 0;
            width: $glass-glow-size;

        }

    }

    &[side = "right"]{

        &:after,
        .wrap{

            right: 0;
            transform: translate3d(100%, 0, 0);

        }

        .content-wrap:after{

            right: 100%;

        }

        .content:after{

            background: linear-gradient(to left, rgba(255, 255, 255, 0), $glass-glow-color);
            height: 100%;
            left: 0;
            top: 0;
            width: $glass-glow-size;

        }

    }

    &[side = "top"]{

        &:after,
        .wrap{

            top: 0;
            transform: translate3d(0, -100%, 0);

        }

        .content-wrap:after{

            top: 100%;

        }

        .content:after{

            background: linear-gradient(to top, rgba(255, 255, 255, 0), $glass-glow-color);
            height: $glass-glow-size;
            left: 0;
            top: 0;
            width: 100%;

        }

    }

    &[side = "bottom"]{

        &:after,
        .wrap{

            bottom: 0;
            transform: translate3d(0, 100%, 0);

        }

        .content-wrap:after{

            bottom: 100%;

        }

        .content:after{

            background: linear-gradient(to bottom, rgba(255, 255, 255, 0), $glass-glow-color);
            bottom: 0;
            height: $glass-glow-size;
            left: 0;
            width: 100%;

        }

    }

    &[open = "true"]{

        &:before{

            opacity: 1;
            pointer-events: auto;

        }

        .wrap{

            box-shadow: 0 0 30px rgba(0, 0, 0, .5);
            transform: none;

        }

        .content-wrap:after{

            opacity: 1;

        }

    }

    &:before{

        bottom: 0;
        content: " ";
        display: block;
        left: 0;
        opacity: 0;
        pointer-events: none;
        position: fixed;
        right: 0;
        top: 0;
        transition: opacity .2s cubic-bezier(0, 0, .3, 1);
        user-select: none;
        will-change: opacity;
        z-index: $z-index - 1;

    }

    &:after,
    .wrap{

        background: $background;
        position: fixed;
        transition: transform $transition;
        will-change: transform;
        z-index: $z-index;

    }

    .wrap{

        html.backdropfilter &{

            background: $background-glass;

        }

    }

    // Shields the drawer off screen so if you scroll over in ios or chrome you
    // don't see the drawers sitting there.
    &:after{

        background: rgba($background, 1);
        content: " ";
        display: block;
        z-index: $z-index + 1;

    }

    .content-wrap{

        backdrop-filter: saturate($glass-saturation);
        height: 100%;
        position: relative;
        z-index: 1;

        &:after{

            background: $shield-color;
            content: " ";
            display: block;
            height: 100vh;
            opacity: 0;
            pointer-events: none;
            position: absolute;
            transition: opacity $transition;
            width: 200vw;
            z-index: 1;

        }

    }

    .content{

        backdrop-filter: blur($glass-blur);
        color: $font-color;
        height: 100%;
        overflow-x: auto;
        overflow-y: auto;
        position: relative;
        text-shadow: 0 1px 1px rgba(0, 0, 0, .15);
        width: 100%;
        z-index: 2;

        a{

            color: $font-color;

        }

        &:after{

            content: " ";
            pointer-events: none;
            position: absolute;

        }

        h1{

            font-size: 20px;
            margin: 0;
            padding: 20px 25px;

        }

        h2{

            font-size: 16px;
            font-weight: 300;
            margin: 0;
            padding: 15px 25px;
            text-transform: uppercase;

        }

        ul{

            font-size: 13px;
            list-style: none;
            margin: 0 0 20px;
            padding: 0;

            a{

                display: block;
                margin: -5px 0;
                padding: 10px 25px;
                transition: background .2s ease-in-out;

                &:hover{

                    background: rgba(0, 0, 0, .2);
                    text-decoration: none;

                }

            }

        }

    }

    div.edge{

        box-shadow: $edge-box-shadow;
        position: absolute;
        right: 0;
        top: 0;
        z-index: 3;

        a{

            align-items: center;
            color: $edge-font-color;
            cursor: pointer;
            display: flex;
            height: $close-size;
            justify-content: center;
            text-decoration: none;
            text-shadow: 0 1px 0 rgba(255, 255, 255, .8);
            transition: background .3s ease-in-out;
            width: $close-size;

            &:hover{

                color: $edge-font-color;

            }

            &.close{

                color: $font-color;
                font-size: 30px;
                line-height: 30px;
                opacity: .6;
                position: relative;
                text-shadow: -1px 1px 0 rgba(0, 0, 0, .1);
                transition: opacity .3s cubic-bezier(0, 0, .3, 1);
                z-index: 2;

                &:hover{

                    opacity: 1;

                }

                span{

                    position: relative;
                    top: -3px;

                }

            }

        }

    }

    h2.title{

        align-items: center;
        background: rgba(0, 0, 0, .1);
        border-bottom: 1px solid rgba(255, 255, 255, .1);
        box-shadow: 0 1px 0 rgba(0, 0, 0, .03);
        color: $font-color;
        display: flex;
        font-size: 15px;
        font-weight: normal;
        height: 50px;
        margin: 0;
        padding: 0 20px;
        text-shadow: -1px 1px 0 rgba(0, 0, 0, .03);

        i.fa{

            margin-right: 20px;
            text-align: center;

        }

    }

}
